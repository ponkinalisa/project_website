<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Наши номера</title>
    <meta name='viewport' content='width=device-width,initial-scale=1'/>
    <meta content='true' name='HandheldFriendly'/>
    <meta content='width' name='MobileOptimized'/>
    <meta content='yes' name='apple-mobile-web-app-capable'/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <link rel="icon" href="img/favicon-32x32.png" type="image/png">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <link rel="stylesheet" href="css/animate.css">
    <link rel="stylesheet" href="css/catalog.css" type="text/css">
    <script src="js/jquery.easydropdown.js" type="text/javascript"></script>
    <link rel="stylesheet" type="text/css" href="css/general.css">
    <link rel="stylesheet" type="text/css" href="css/easydropdown.metro.css"/>
    <script src="https://code.jquery.com/jquery-3.3.1.js"></script>
    <script>
        $(function(){
            $("#header").load("header.html");
            $("#footer").load("footer.html");
            $("#popup").load("popup.html");
        });
    </script>
</head>
<body>
<div class="catalog_wrapper">
<div id="header"></div>
<div id="popup"></div>
<div class="catalog-columns">
    <div class="catalog-title">
        <h1>Наши номера</h1>
    <div class="sort">
        <a href="#" id="BtnFilter" class="filter-tablet-btn">Фильтры</a>
        <select class="dropdown" id="select">
            <option value="expensive_area">&uarr;
                &#32;По площади</option>
            <option value="cheap_area">&darr;
                &#32;По площади</option>
            <option value="expensive_price">&uarr;
                &#32;По цене</option>
            <option value="cheap_price">&darr;
                &#32;По цене</option>
            <option disabled="disabled" value="5"></option>
        </select>
    </div>
    </div>

</div>
<div class="grid-columns" id="main">
    <div class="span-row-10">
        <form class="filter-form" action="#" method="get">
            <div class="filter-form-item">
                <legend class="filter-form-title">Цена за сутки,&#8381;</legend>
                <div class="filter-form-price-range">
                    от
                    <input type="text" name="min-price" value="100" pattern="[0-9]*"> до
                    <input type="text" name="max-price" value="600" pattern="[0-9]*">
                </div>
            </div>
            <div class="filter-form-item">
                <legend class="filter-form-title">Площадь</legend>
                <label class="sorting">0,63 м<sup>2</sup>
                        <input type="checkbox">
                        <span class="checkmark"></span>
                </label>
                <label class="sorting">0,90 м<sup>2</sup>
                    <input type="checkbox">
                    <span class="checkmark"></span>
                </label>
                <label class="sorting">1,13 м<sup>2</sup>
                    <input type="checkbox">
                    <span class="checkmark"></span>
                </label>
                <label class="sorting">1,56 м<sup>2</sup>
                    <input type="checkbox">
                    <span class="checkmark"></span>
                </label>
                <label class="sorting">2,56 м<sup>2</sup>
                    <input type="checkbox">
                    <span class="checkmark"></span>
                </label>
                <label class="sorting">2,88 м<sup>2</sup>
                    <input type="checkbox">
                    <span class="checkmark"></span>
                </label>
            </div>
            <div class="filter-form-item">
                <legend class="filter-form-title">Оснащение номера</legend>
                <label class="sorting">Пустой номер
                    <input type="checkbox">
                    <span class="checkmark"></span>
                </label>
                <label class="sorting">Лежак
                    <input type="checkbox">
                    <span class="checkmark"></span>
                </label>
                <label class="sorting">Когтеточка
                    <input type="checkbox">
                    <span class="checkmark"></span>
                </label>
                <label class="sorting">Игровой комплекс
                    <input type="checkbox">
                    <span class="checkmark"></span>
                </label>
                <label class="sorting">Домик
                    <input type="checkbox">
                    <span class="checkmark"></span>
                </label>
            </div>
            <div class="buttons">
            <a href="#" class="filter-form-btn">Применить</a>
            <a href="#" class="filter-form-btn reset">Сбросить</a>
            </div>
        </form>
    </div>
    
</div>
</div>
    <div class="stock">
        <img class="photo_mobile" src="img/stock_mobile.jpg"  alt="Акция" title="Фотография с акцией">
        <img class="photo_desktop" src="img/stock.jpg"  alt="Акция" title="Фотография с акцией">
        <img class="photo_tablet" src="img/stock_tablet.jpg"  alt="Акция" title="Фотография с акцией">
        <div class="promo">
            <h1>Каждый 7-ой день <br><span>бесплатно!</span></h1>
            <p> Акция действует при размещении<br> в номерах “Люкс” и “Супер-Люкс” </p>
            <div class="clear">
            <a href="#" class="main-btn order-button"><span>Забронировать</span></a>
            </div>

        </div>
    </div>
<!-- The Modal Filter -->
<div id="FilterModal" class="modal">

    <!-- Modal content filer-->
    <div class="modal-content">
        <span id="closeFilter" class="close">×</span>
        <form class="filter-form" action="#" method="get">
            <div class="filter-form-item">
                <legend class="filter-form-title">Цена за сутки,&#8381;</legend>
                <div class="filter-form-price-range">
                    от
                    <input type="text" name="min-price" value="100" pattern="[0-9]*"> до
                    <input type="text" name="max-price" value="600" pattern="[0-9]*">
                </div>
            </div>
            <div class="filter-form-item">
                <legend class="filter-form-title">Площадь</legend>
                <label class="sorting">0,63 м<sup>2</sup>
                    <input type="checkbox">
                    <span class="checkmark"></span>
                </label>
                <label class="sorting">0,90 м<sup>2</sup>
                    <input type="checkbox">
                    <span class="checkmark"></span>
                </label>
                <label class="sorting">1,13 м<sup>2</sup>
                    <input type="checkbox">
                    <span class="checkmark"></span>
                </label>
                <label class="sorting">1,56 м<sup>2</sup>
                    <input type="checkbox">
                    <span class="checkmark"></span>
                </label>
                <label class="sorting">2,56 м<sup>2</sup>
                    <input type="checkbox">
                    <span class="checkmark"></span>
                </label>
                <label class="sorting">2,88 м<sup>2</sup>
                    <input type="checkbox">
                    <span class="checkmark"></span>
                </label>
            </div>
            <div class="filter-form-item">
                <legend class="filter-form-title">Оснащение номера</legend>
                <label class="sorting">Пустой номер
                    <input type="checkbox">
                    <span class="checkmark"></span>
                </label>
                <label class="sorting">Лежак
                    <input type="checkbox">
                    <span class="checkmark"></span>
                </label>
                <label class="sorting">Когтеточка
                    <input type="checkbox">
                    <span class="checkmark"></span>
                </label>
                <label class="sorting">Игровой комплекс
                    <input type="checkbox">
                    <span class="checkmark"></span>
                </label>
                <label class="sorting">Домик
                    <input type="checkbox">
                    <span class="checkmark"></span>
                </label>
            </div>
            <div class="buttons">
                <a href="#" class="filter-form-btn">Подобрать</a>
                <a href="#" class="filter-form-btn reset">Сбросить</a>
            </div>
        </form>
    </div>

</div>
<div id="footer"></div>
</div>
<script>
    var radios = document.getElementsByTagName('option');
    var res;
    for (var i = 0; i < radios.length; i++) {
        if(radios[i].value==='5') {
            radios[i].style.display='none';
        }
    }
</script>
<script>
    // Get the modal Filter
    var modal = document.getElementById('FilterModal');

    // Get the button that opens the modal
    var btn = document.getElementById("BtnFilter");

    // Get the <span> element that closes the modal
    var span = document.getElementById("closeFilter");

    // When the user clicks the button, open the modal
    btn.onclick = function() {
        modal.style.display = "block";
    }

    // When the user clicks on <span> (x), close the modal
    span.onclick = function() {
        modal.style.display = "none";
    }
    window.onclick = function(event) {
        if (event.target == modal) {
            modal.style.display = "none";
        }
    }
    /*<div class="eco markup">
        <img src="img/eco.jpg">
        <div class="description-item">
        <h3>Эконом</h3>
        <ul>
            <li>Площадь - 0,63 м<sup>2</sup></li>
            <li>Размеры(ШxГxВ) - 90x70x180 см</li>
            <li>Цена за сутки: 100&#8381;</li>
            <li>Оснащение номера
                <span class="tooltips" href="#"><img alt="empty.svg" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTE2IDhDMTYgMTAuMTM2OSAxNS4xNjc4IDEyLjE0NTggMTMuNjU2OSAxMy42NTY5QzEyLjE0NTggMTUuMTY3OCAxMC4xMzY5IDE2IDggMTZDNi41MDQwOSAxNiA1LjA3MTE2IDE1LjU5MTcgMy44Mjc1NiAxNC44Mjg3TDQuNzQ0NzUgMTMuOTExNUM1LjcxMDY5IDE0LjQ0NTUgNi44MjAzNyAxNC43NSA4IDE0Ljc1QzExLjcyMiAxNC43NSAxNC43NSAxMS43MjIgMTQuNzUgOEMxNC43NSA2LjgyMDM3IDE0LjQ0NTUgNS43MTA2OSAxMy45MTE1IDQuNzQ0NzhMMTQuODI4NyAzLjgyNzU5QzE1LjU5MTcgNS4wNzExNiAxNiA2LjUwNDA5IDE2IDhaTTAuOTEwNjg4IDE1Ljk3MzJMMC4wMjY4MTI1IDE1LjA4OTNMMS45MTgzMSAxMy4xOTc4QzAuNjc3MDk0IDExLjc1MDIgMCA5LjkyNzE2IDAgOEMwIDUuODYzMTIgMC44MzIxNTYgMy44NTQxNiAyLjM0MzEzIDIuMzQzMTNDMy44NTQxNiAwLjgzMjE1NiA1Ljg2MzEyIDAgOCAwQzkuOTI3MTYgMCAxMS43NTAyIDAuNjc3MDk0IDEzLjE5NzggMS45MTgzMUwxNS4wODkzIDAuMDI2ODEyNUwxNS45NzMyIDAuOTEwNjg4TDAuOTEwNjg4IDE1Ljk3MzJaTTIuODA3OTEgMTIuMzA4MkwxMi4zMDgyIDIuODA3OTFDMTEuMTM4NSAxLjgzNTU5IDkuNjM2NDEgMS4yNSA4IDEuMjVDNC4yNzgwMyAxLjI1IDEuMjUgNC4yNzgwMyAxLjI1IDhDMS4yNSA5LjYzNjQxIDEuODM1NTYgMTEuMTM4NSAyLjgwNzkxIDEyLjMwODJaIiBmaWxsPSIjNzc3Nzc3Ii8+Cjwvc3ZnPgo="/><span class="">Пустой номер</span></span>
            </li>
        </ul>
            <div class="clear">
            <a href="#" class="number-btn order-button"><span>Забронировать</span></a>
            </div>
        </div>
    </div>*/


    async function fetchRooms() {
        console.log(0);
            try {
                const filters = {
                    price: 100,
                    area: 50
                };

                var sortBy = 'area';
                var order = 'DESC';

                let url = 'hotel_booking/public/index.php?action=getRooms';

                // Добавляем параметры фильтрации (преобразуем объект в строку запроса)
                for (const key in filters) {
                     if (filters.hasOwnProperty(key)) {
                         url += '&filters[' + key + ']=' + encodeURIComponent(filters[key]);
                    }
                }
                if (sel == 'expensive_price'){
                    sortBy = 'price';
                    order = 'DESC';
                } else if (sel == 'cheap_price'){
                    sortBy = 'price';
                    order = 'ASC';
                } else if (sel == 'expensive_area'){
                    sortBy = 'area';
                    order = 'DESC';
                }else if (sel == 'cheap_area'){
                    sortBy = 'area';
                    order = 'ASC';
                }
                // Добавляем параметры сортировки
                url += '&sortBy=' + encodeURIComponent(sortBy);
                url += '&order=' + encodeURIComponent(order);
                const response = await fetch(url);  // URL вашего API


                const data = await response.json();  // Преобразуем ответ в JSON

                // Очищаем контейнер перед вставкой новых данных
                const slider = document.getElementById('main');

                // Проходим по данным и выводим их на страницу
                data.forEach(room => {
                    const roomElement = document.createElement('div');
                    roomElement.classList.add('eco');  // Добавляем CSS-класс для стилей
                    roomElement.classList.add('markup');

                    var img = new Image();
                    img.src = room.image_url;
                    img.style.border = '10px';
                    roomElement.appendChild(img);


                    const desc = document.createElement('div');
                    desc.classList.add('description-item');

                    const h3 = document.createElement('h3');
                    h3.innerHTML = '<a href="' + room.learn_more_url + '">' + room.name + '</a>';
                    desc.appendChild(h3);

                    const p1 = document.createElement('p');
                    p1.innerHTML = 'Цена за сутки ' + Math.floor(room.price) + 'руб.';
                    desc.appendChild(p1);

                    const p = document.createElement('p');
                    p.innerHTML = room.description;
                    desc.appendChild(p);

                    const a = document.createElement('div');
                    a.classList.add('clear');
                    const a1 = document.createElement('a');
                    a1.innerHTML = '<span>Забронировать</span>';
                    a1.classList.add('number-btn');
                    a1.classList.add('order-button');
                    a1.href = '#';
                    a.appendChild(a1);
                    desc.appendChild(a);
                    desc.appendChild(document.createElement('br'));

                    roomElement.appendChild(desc);

                    if (room.available){
                        slider.appendChild(roomElement);
                    }
                });
            } catch (error) {
                console.error('Ошибка при получении данных:', error);
            }
        }

        var sel = document.getElementsByClassName('dropdown')[0];
        console.log(sel.value);
        sel.addEventListener('change', () => {
            console.log(0);
        });

        // Загрузка данных при готовности DOM
        document.addEventListener('DOMContentLoaded', () => {
            fetchRooms();
        });
</script>
<script src="js/btn_top/easing.js" type="text/javascript"></script>
<!-- UItoTop plugin -->
<script src="js/btn_top/jquery.ui.totop.js" type="text/javascript"></script>
<!-- Starting the plugin -->
<script type="text/javascript">
    $(document).ready(function() {
        /*
        var defaults = {
        containerID: 'toTop', // fading element id
        containerHoverID: 'toTopHover', // fading element hover id
        scrollSpeed: 1200,
        easingType: 'linear'
        };
        */

        $().UItoTop({ easingType: 'easeOutQuart' });

    });
</script>
</body>
</html>